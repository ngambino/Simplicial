\documentclass[reqno,10pt,a4paper,oneside,draft]{amsart}
\setcounter{tocdepth}{1}
\usepackage{../Auxiliary/prelude}



\title[]{Notes on simplicial homotopy theory}

\begin{document}

\begin{abstract}
Some notes on simplicial homotopy theory
\end{abstract}

\author{Nicola Gambino}

\author{Simon Henry}


 \date{\today}

\maketitle

\section{Introduction}

\newpage

\section{The semi-model structure on simplicial sets}

\subsection*{Semi-model structures} 

Let $\cal{E}$ be a category with an initial object $0$. A {\bf class of cofibrations} in $\cal{E}$ is
a class of maps $\Cof$ of $\cal{E}$ with the following properties:
\begin{enumerate}[(C1)]
\item $\Cof$ contains identities and is closed under composition;
\item For all $i \co A \to B$ in $\Cof$, $A$ is cofibrant;
\item For all $i \co A \to B$ in $\Cof$ and $f \co A \to A'$ with $A'$ cofibrant, there is a pushout
\[
\xymatrix{
A \ar[r]^f \ar[d]_{i}  & A' \ar[d] \\
B \ar[r] & \ulpullback B }
\]
with $A' \to B'$ in $\Cof$.
\item Isomorphisms whose domain is cofibrant are in $\Cof$.
\end{enumerate}
There is a dual notion of a class of fibrations in a category with a terminal object, which we do
not spell out.

\medskip

Let now $\cal{E}$ be a category with both an initial object $0$ and a terminal object $1$,
a class of cofibrations $\Cof$ and a class of fibrations $\Fib$. We say that a map is a {\bf trivial fibration}
if it is a fibration and it has the right lifting property with respect to all cofibrations. Dually, we say that
a map is a {\bf trivial cofibration} if it is a cofibration and it has the left lifting property with respect to
all fibrations. An object is said to be {\bf bifibrant} if it is both fibrant and cofibrant.


\begin{definition} A {\bf semi-model structure} on $\cal{E}$ consists of a class of cofibrations $\Cof$, a class of
fibrations $\Fib$ such that
\begin{enumerate}[(SM1)]
\item Every map $f \co A \to X$, where $A$ is cofibrant and $X$ is fibrant, factors both as a
cofibration followed by a trivial fibration and as a trivial cofibration followed by a trivial fibration.
\item For every bifibrant object $X$, we have a factorisation of the codiagonal $\nabla_X \co 
X + X \to X$ as a cofibration followed by a fibration 
\[
\xymatrix{X + X \ar[r] &  {\bf I}(X) \ar[r] & X}
\]
such that the composites 
\[
\xymatrix{X \ar[r]^-{\iota_k}  & X+X \ar[r] & {\bf I }(X)}
\]
are trivial cofibrations.
\item For every bifibrant object $X$, we have a factorisation of the diagonal $\Delta_X \co X \to 
X \times X$ as a cofibration followed by a fibration
\[
\xymatrix{X  \ar[r]  & {\bf P}(X) \ar[r] & X \times X }
 \]
 such that the composites
\[
\xymatrix{ {\bf P}(X) \ar[r] &  X \times X \ar[r]^-{\pi_k} &  X }
\]
are trivial fibrations.
\end{enumerate}
\end{definition}

\bigskip



It is important to note the similarities and differences between semi-model structures and model
structures. 

\subsection*{Simplicial sets} 

\begin{itemize}
\item Basics on $\SSet$ and notation. 
\item We use $\Delt{n}$, $\partial \Delt{n}$ and $\Horn{k}{n}$.
\item Recall the semi model structure on $\SSet$:
\begin{itemize}
\item Generating cofibrations are the boundary inclusions, 
\[
\cal{I} \defeq \{ \inc{n} \co  \partial \Delt{n} \to \Delt{n} \ | \ n \geq 0 \}
\]
\item Trivial Kan fibrations = maps with the right lifting property with respect to $\cal{I}$.
\item Cofibrations = Levelwise complemented monomorphisms such that degeracies are decidable on the complement of the image. 
\item Cofibrant objects are simplicial sets in which degeneracies are decidable.
\item Generating trivial cofibrations are the horn inclusions:
\[
\cal{J} \defeq \{ \horninc{k}{n}  \co \Horn{k}{n} \to \Delt{n} \ | \ 0 \leq k \leq n \} \, .
\]
\item Kan fibrations = maps with the right lifting property with respect to $\cal{J}$.
\item Fibrant objects are Kan complexes.
\item Interval object is $\Delt{1}$. Endpoint inclusions $\kcyl \co \braces{ k} \to \Delt{1}$ are
defined by $\kcyl \defeq \horninc{1}{k}$.
\end{itemize}
\item It would be good to have an explicit definition of the cofibrant replacement functor.
\item Recall the pushout product property.
\end{itemize}

 


We recall (from $5.1.5$ of \cite{henry2018wms}) that the Eilenberg-Zilber lemma holds for cofibrant simplicial sets:

\begin{lemma}
\label{lem:EZ_cof}In a cofibrant simplicial set $X$, any cell $x \in X$ can be written uniquely as $p^* y$ where $y$ is a non-degenerate cell of $X$ and $p$ is a degeneracy.
\end{lemma}




\begin{lemma}\label{lem:cofibrant_fiber_product}
If $B$ and $C$ are cofibrants, and $A$ is any simplicial sets with maps $B \rightarrow A$, $C \rightarrow A$ then the pullback $B \times_{A} C$ is cofibrant.
\end{lemma}

\begin{proof}
We check it first in the case $A=1$, i.e. for the product $B \times C$. Let $x = (b,c) \in (B \times C)_n$, if $B$ and $C$ are cofibrant one can apply lemma \ref{lem:EZ_cof} and write $b=p^* b'$ and $c=q^* c'$ with $b'$ and $c'$ non-degenerate cells and $p:[n] \twoheadrightarrow [m]$ and $q:[n] \twoheadrightarrow [k]$ are two degeneracies. We claim that $x$ is degenerate if and only if the map $(p,q):[n] \rightarrow [m] \times [k]$ is not monic, which is indeed a decidable condition as $(p,q)$ is a map between finite decidable sets.

Indeed, the pair of map $(p,q)$ corresponding to a degenerate cell $x=r^* x'$ for any non-trivial degeneracy $r:[n] \twoheadrightarrow [n']$, is  $(p'r,q'r)$ where $(p',q')$ are the maps corresponding to $x'$, and this is never monic as it factor into $r$, hence for a degenerate cell the condition above is always satisfied. Conversely, if $(p,q): [n] \rightarrow [m] \times [k]$ is not monic then as it is an increasing map there is some $i$ such that $p(i)=p(i+1)$ and $q(i)=q(i+1)$, hence $(p,q)$ can be factored into the $i$-th degeneracy map:$p=p' d_i$ and $q=q' d_i$ and in this case $x= d_i^* (p'^* b',q'^* c')$ is indeed a degenerate cell.


In the case where $A$ is non-trivial, $B \times_A C$ is a sub-simplicial set of $B \times C$ hence a cell of $B \times_A C$ is degenerate if and only if it is degenerate as a cell of $B \times C$, hence degeneratness in $B \times_A C$ is indeed decidable. 
\end{proof}


\begin{proposition} \label{thm:cof-pbk} If $A,B,C$ are cofibrant simplicial sets, $A \hookrightarrow C$ is a cofibrations and $f:B \rightarrow C$ is any morphism, then the natural projection map $A \times_C B \rightarrow B$ is a cofibration.
\end{proposition}

\begin{proof} As $B$ is cofibrant the proposition just claim that $A \times_C B \rightarrow B$ is a levelwise complemented monomorphisms. A cell $b \in B_n$ is in  $(A \times_C B)_n$ if and only if its image in $C_n$ belong to $A_n$. As $A \rightarrow C$ is a levelwise complemented monomorphism, this is indeed decidable.
\end{proof} 



% \begin{lemma} For $0 \leq k \leq n$, the horn inclusion $\horninc{k}{n} \co \Horn{k}{n} \to \Delt{n}$ is a retract of
% the pushout product
% \[
% \horninc{k}{1} \hattimes i^n \co (\Delt{1} \times \Sphere{n} ) \cup (\braces{k} \times \Delt{n} ) \to \Delt{1} \times \Delt{n} 
% \]
% \end{lemma} 



\begin{proposition} A map is a Kan fibration if and only if it has the right lifting property with respect to the pushout products $i \hattimes \kcyl$.
\end{proposition} 

\begin{proof}The proof of theorem $3.2.3$ in \cite{joyal-tierney:simplicial-homotopy-theory} is completely constructive and sufficient to implies this results.
For more details see also the last claim of corrolary $5.3.2$ in \cite{henry2018wms} (which follows from proposition $5.2.6$ of the same reference). 
\end{proof}

\newpage

\section{Dependent products}

The first aim of this section is to show that for every fibration $p \co B \to A$~with $A$ cofibrant, the pushforward functor $\Pi_p \co \catE_{/B} \to \calE_{/A}$ 
preserves fibrations. Our second aim is to build on this result to define sufficient structure to interpret Martin-L\"of's rules for $\Pi$-types. 

\medskip

For our first aim, let $p \co B \to A$ be a fibration with cofibrant codomain and observe that 
$\Pi_p \co \catE_{/B} \to \calE_{/A}$  preserves fibrations if and only if its left adjoint 
\[
p^* \co \catE_{/A} \to \calE_{/B}
\]
preserves trivial cofibrations. Furthermore,
\begin{lemma} \label{thm:missing-1}
\hfill 
\begin{enumerate}[(i)] 
\item $\mathcal{J} \subset \Cof \cap \mathcal{S}$.
\item $\Cof \cap \mathcal{S} \subseteq \TrivCof$.
\end{enumerate}
\end{lemma} 

\begin{lemma} 
\label{thm:missing-2}
For $k \in \{0,1\}$, the pullback of a strong $k$-oriented homotopy equivalence 
with cofibrant codomain along a
fibration is a strong $k$-oriented homotopy equivalence.
\end{lemma}






\begin{theorem} 
\label{thm:restricted-frobenius}
The semi-model structure for Kan complexes on $\SSet$ has the restricted Frobenius condition.
\end{theorem} 

\begin{proof}  Since the semi-model structure in which we 
are working is cofibrantly generated, it is sufficient [TO CHECK] that $p^*$ sends generating trivial cofibrations to trivial cofibrations. So, let $p \co B \to \Delta[n]$ be a fibration, $i \co \Lambda^k[n]
\to \Delta[n]$ be a horn inclusion, and define $ j \defeq p^*(i)$, given by 
the pullback diagram
\[
\xymatrix{
\bullet  \ar[r] \ar[d]_j \drpullback & \Lambda^k[n] \ar[d]^{i} \\
B \ar[r]_-{p} & \Delta[n] }
\]
We need to show that $j$ is a trivial cofibration.  
First, since $i$ is a trivial cofibration, it is in particular
a cofibration and therefore $j$ is again a cofibration by~\cref{thm:cof-pbk}. Secondly, since~$i \in \cal{J}$,
by part~(i) of \cref{thm:missing-1}, it is a cofibration and a strong homotopy equivalence. Since its codomain is cofibrant, $j$ is a strong homotopy equivalence by~\cref{thm:missing-2}.
But now $j$ is both a cofibration and a strong homotopy equivalence
and hence it is a trivial cofibration, as required, by part~(ii) of \cref{thm:missing-2}.
\end{proof} 


We now discuss our second aim, namely showing how we can build on \cref{thm:restricted-frobenius} 
to define sufficient structure to interpret $\Pi$-types. This is not immediate since the result of applying $\Pi_p$ to a 
fibration with cofibrant domain need not have cofibrant domain.
 Suppose that we have fibrations 
$q \co B \to A$ and~$p \co A \to \Gamma$, with
all objects both fibrant and cofibrant. 
We begin by applying 
\[
\Pi_p  \co \SSet_{/A} \to \SSet_{/\Gamma}
\]
to $q \co B \to A$, so as to obtain $\Pi_p(q) \co \Pi_A(B) \to \Gamma$, which is
a fibration by~\cref{thm:restricted-frobenius}. The domain of this map is fibrant but
not necessarily cofibrant, so we consider its cofibrant replacement 
\[
\widetilde{\Pi}_A(B) \defeq \mathbb{L} \big( \Pi_A(B)  \big) \, ,
\]
which comes equipped with a trivial fibration $\varepsilon \co \widetilde{\Pi}_A(B) \to \Pi_A(B)$.
Finally, we define the fibration $\widetilde{\Pi}_p(q) \co \widetilde{\Pi}_A(B) \to \Gamma$ as 
 the composite
 \[
\xymatrix{
\widetilde{\Pi}_A(B) \ar[rr]^{\varepsilon} \ar[dr]_{\widetilde{\Pi}_p(q) } & & \Pi_A(B) \ar[dl]^{\Pi_p(q)}  \\
 & \Gamma &} 
 \]
This will satisfy the $\beta$-rule but not the $\eta$-rule for $\Pi$-types [TO BE ADDED].


\newpage

\section{The universe}

Recall that we work in a constructive set theory with two universes $\mathsf{u}_1$ and $\mathsf{u}_2$
and that we refer to elements of $\mathsf{u}_1$ as small sets. We then define a simplicial
set $X$ to be \emph{small}


\begin{definition} \hfill 
\label{thm:small}
\begin{enumerate}[(i)]
\item We say that a simplicial set $X$ is \emph{small}  if $X_n$ is a small set for every $[n] \in \Delta$. 
\item We say that a map $f \co Y \to X$ in $\SSet$ is \emph{small} if for every $x \co \Delta[n] 
\to X$ the simplicial set~$Y_x$ fitting in the pullback square
\[
\xymatrix{
Y_x \ar[r] \ar[d] \drpullback & Y \ar[d]^{f} \\
\Delta[n] \ar[r]_x & X }
\]
is small.
\end{enumerate}
\end{definition} 

By the results in~\cite{hofmann-streicher-universes} for arbitrary presheaf categories, small maps in
 $\SSet$ admit a weak classifier, \ie a small map $\rho \co \VV \to \V$ such 
that for every small map $f \co Y \to X$ there exists  a pullback diagram of the form
\[
\xymatrix{
Y \ar[r] \ar[d]_f \drpullback  & \VV \ar[d]^\rho \\
X \ar[r] & \V }
\]
Letting $X = \Delta[n]$ in this diagram suggests to define $\V_n$ as the set of all small maps with codomain~$\Delta[n]$. In this way, however, one does not obtain a presheaf since the transition functions
will satisfy the functorial laws only up to isomorphism rather than equality. To remedy this, the $n$-simplices of $\V$ are defined instead to be the functors $F \co (\Delta/[n])^{\op} \to \Set$ such that 
the corresponding map of simplicial sets $ \mathsf{El}(F) \to \Delta[n]$ is small. MORE TO BE ADDED.

\medskip

Following~\cite{cisinski-univalence,voevodsky-simplicial-model}, we consider the pullback 
\[
\xymatrix{
\UU \ar[r] \ar[d]_\pi \drpullback  & \VV \ar[d]^\rho \\
\U \ar[r] & \V }
\]
where $\U \subseteq \V$ is defined by letting 
\[
\U_n = \{ F \in \V_n \ | \ \mathsf{El}(F) \to \Delta[n] \text{ is a small Kan fibration } \}
\]


\begin{proposition} \label{thm:universe-u}  \hfill 
\begin{enumerate}[(i)] 
\item $\pi \co \UU \to \U$ is a small Kan fibration.
\item $\pi \co \UU \to \U$ classifies small Kan fibrations, \ie 
for every small Kan fibration $f \co Y \to X$ there exists  a pullback diagram of the form
\[
\xymatrix{
Y \ar[r] \ar[d]_f \drpullback & \UU \ar[d]^\pi \\
X \ar[r] & \U }
\]
\item  The simplicial set $\UU$ is cofibrant.
\end{enumerate}
\end{proposition}

\begin{proof} We prove the three claims separately.
\begin{enumerate}[(i)] 
\item Should follow by locality.
\item Should be immediate.
\item See handwritten notes. Key step is the constructive version of the Eilenberg-Zilber lemma. \qedhere
\end{enumerate}
\end{proof} 

However, the simplicial set $\U$ does not appear to be cofibrant and hence it does not seem possible to show that  $\pi \co \UU \to \U$ is a weak classifier for small Kan fibrations with cofibrant codomain. In order to remedy this, we consider the cofibrant replacement $\U_c$ of $\U$, which comes equipped
with a trivial fibration $p \co \U_c \to \U$, and the pullback
\[
\xymatrix{
\UU_c \ar[d]_{\pi_c} \ar[r] \drpullback & \UU \ar[d]^{\pi}  \\
\U_c \ar[r]_p & \U}
\]
We can now prove that $\pi_c \co \UU_c \to \U_c$ has the desired properties.


\begin{proposition} \label{thm:universe-uc} 
\hfill 
\begin{enumerate}[(i)] 
\item $\pi_c \co \UU_c \to \U_c$ is a small Kan fibration with fibrant codomain. 
\item The map $\pi_c \co \UU_c \to \U_c$ classifies small Kan fibrations with cofibrant domain, \ie 
for every small Kan fibration $f \co Y \to X$ with $X$ cofibrant there exists  a pullback diagram of the form
\[
\xymatrix{
Y \ar[r] \ar[d]_f & \UU_c \ar[d]^{\pi_c} \\
X \ar[r] & \U_c }
\]
\item The simplicial set $\UU_c$ is cofibrant.
\end{enumerate}
\end{proposition}

\begin{proof} Part~(i) follows from part~(i) of~\cref{thm:universe-u}. For part~(ii), 
let $f \co Y \to X$ be a small Kan fibration with $X$ cofibrant. Since $f$ is a
small Kan fibration, we know 
from~\cref{thm:universe-u} that there is a pullback diagram of the form 
\[
\xymatrix{
Y \ar[r] \ar[d]_f \drpullback & \UU \ar[d]^{\pi} \\
X \ar[r] & \U }
\]
Since $X$ is cofibrant, we have the lifting diagram
\[
\xymatrix{
0 \ar[r] \ar[d] & \U_c \ar[d]^{p} \\
X \ar[r] \ar@{.>}[ur] & \U }
\]
which shows that the map $X \to \U$ factors via $\U_c$.  We then obtain the diagram
\[
\xymatrix{
Y \ar[r] \ar[d]_f &  \UU_c \ar[r]  \ar[d]^{\pi_c} \drpullback & \UU \ar[d]^{\pi} \\
X \ar[r] & \U_c \ar[r]_p &  \U }
\]
Here, the right-hand side square and the rectangle are pullbacks and therefore the left-hand
side square is also a pullback, as required. Part (iii) follows from the fact that both $\U_c$ and
$\UU$ are cofibrant, the latter being part (iii) of~\cref{thm:universe-u}.
\end{proof} 








Note that we have not shown yet that $\U_c$ fibrant. This will be done in~\cref{sec:fibuu}, as a consequence of the equivalence extension property for fibrations, which we establish in~\cref{sec:equep}.

\newpage

\section{The equivalence extension property}
\label{sec:equep}

\begin{itemize}
\item Here we follow Kapulkin and Lumsdaine.
\end{itemize}

\newpage

\section{Fibrancy and univalence of the universe}
\label{sec:fibuu}

\begin{itemize}
\item Fibrancy should follow directly from equivalence extension property, without using `composition vs filling' but rather retract property for horns (see notes).
\item Once we have established fibrancy of $U_c$, then one can prove univalence by showing that 
$t \co \mathsf{Weq}(U_c) \to U_c$ is a trivial fibration. 
\item Question: do we need to know that $\mathsf{Weq}(U_c)$ is a cofibrant object to get univalence? 
\end{itemize}


\newpage

\section{Semantics}


\begin{itemize}
\item This should be essentially straightforward, following Kapulkin and Lumsdaine, but we may need to modify the notion of a $\Pi$-structure to accommodate the cofibrant replacements that we take for $\Pi$.
\end{itemize}

\nocite{*}


\bibliographystyle{plain}
\bibliography{../Auxiliary/bibliography}

\end{document}

