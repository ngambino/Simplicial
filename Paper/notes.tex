\documentclass[reqno,10pt,a4paper,oneside,draft]{amsart}
\setcounter{tocdepth}{1}
\usepackage{../Auxiliary/prelude}



\title[]{Notes on simplicial homotopy theory}

\begin{document}

\begin{abstract}
Some notes on simplicial homotopy theory
\end{abstract}

\author{Nicola Gambino}

\author{Simon Henry}


 \date{\today}

\maketitle

\section{Introduction}

\newpage

\section{The semi-model structure on simplicial sets}

\subsection*{Semi-model structures} 

Let $\cal{E}$ be a category with an initial object $0$. A {\bf class of cofibrations} in $\cal{E}$ is
a class of maps $\Cof$ of $\cal{E}$ with the following properties:
\begin{enumerate}[(C1)]
\item $\Cof$ contains identities and is closed under composition;
\item For all $i \co A \to B$ in $\Cof$, $A$ is cofibrant;
\item For all $i \co A \to B$ in $\Cof$ and $f \co A \to A'$ with $A'$ cofibrant, there is a pushout
\[
\xymatrix{
A \ar[r]^f \ar[d]_{i}  & A' \ar[d] \\
B \ar[r] & \ulpullback B }
\]
with $A' \to B'$ in $\Cof$.
\item Isomorphisms whose domain is cofibrant are in $\Cof$.
\end{enumerate}
There is a dual notion of a class of fibrations in a category with a terminal object, which we do
not spell out.

\medskip

Let now $\cal{E}$ be a category with both an initial object $0$ and a terminal object $1$,
a class of cofibrations $\Cof$ and a class of fibrations $\Fib$. We say that a map is a {\bf trivial fibration}
if it is a fibration and it has the right lifting property with respect to all cofibrations. Dually, we say that
a map is a {\bf trivial cofibration} if it is a cofibration and it has the left lifting property with respect to
all fibrations. An object is said to be {\bf bifibrant} if it is both fibrant and cofibrant.


\begin{definition} A {\bf semi-model structure} on $\cal{E}$ consists of a class of cofibrations $\Cof$, a class of
fibrations $\Fib$ such that
\begin{enumerate}[(SM1)]
\item Every map $f \co A \to X$, where $A$ is cofibrant and $X$ is fibrant, factors both as a
cofibration followed by a trivial fibration and as a trivial cofibration followed by a trivial fibration.
\item For every bifibrant object $X$, we have a factorisation of the codiagonal $\nabla_X \co 
X + X \to X$ as a cofibration followed by a fibration 
\[
\xymatrix{X + X \ar[r] &  {\bf I}(X) \ar[r] & X}
\]
such that the composites 
\[
\xymatrix{X \ar[r]^-{\iota_k}  & X+X \ar[r] & {\bf I }(X)}
\]
are trivial cofibrations.
\item For every bifibrant object $X$, we have a factorisation of the diagonal $\Delta_X \co X \to 
X \times X$ as a cofibration followed by a fibration
\[
\xymatrix{X  \ar[r]  & {\bf P}(X) \ar[r] & X \times X }
 \]
 such that the composites
\[
\xymatrix{ {\bf P}(X) \ar[r] &  X \times X \ar[r]^-{\pi_k} &  X }
\]
are trivial fibrations.
\end{enumerate}
\end{definition}

\bigskip



It is important to note the similarities and differences between semi-model structures and model
structures. 

\subsection*{Simplicial sets} 

\begin{itemize}
\item Basics on $\SSet$ and notation. 
\item We use $\Delt{n}$, $\partial \Delt{n}$ and $\Horn{k}{n}$.
\item Recall the semi model structure on $\SSet$:
\begin{itemize}
\item Generating cofibrations are the boundary inclusions, 
\[
\cal{I} \defeq \{ \inc{n} \co  \partial \Delt{n} \to \Delt{n} \ | \ n \geq 0 \}
\]
\item Trivial Kan fibrations = maps with the right lifting property with respect to $\cal{I}$.
\item Cofibrations = Levelwise complemented monomorphisms such that degeracies are decidable on the complement of the image. 
\item Cofibrant objects are simplicial sets in which degeneracies are decidable.
\item Generating trivial cofibrations are the horn inclusions:
\[
\cal{J} \defeq \{ \horninc{k}{n}  \co \Horn{k}{n} \to \Delt{n} \ | \ 0 \leq k \leq n \} \, .
\]
\item Kan fibrations = maps with the right lifting property with respect to $\cal{J}$.
\item Fibrant objects are Kan complexes.
\item Interval object is $\Delt{1}$. Endpoint inclusions $\kcyl \co \braces{ k} \to \Delt{1}$ are
defined by $\kcyl \defeq \horninc{1}{k}$.
\end{itemize}
\item It would be good to have an explicit definition of the cofibrant replacement functor.
\item Recall the pushout product property.
\end{itemize}

 


We recall (from $5.1.5$ of \cite{henry2018wms}) that the Eilenberg-Zilber lemma holds for cofibrant simplicial sets:

\begin{lemma}
\label{lem:EZ_cof}In a cofibrant simplicial set $X$, any cell $x \in X$ can be written uniquely as $p^* y$ where $y$ is a non-degenerate cell of $X$ and $p$ is a degeneracy.
\end{lemma}




\begin{lemma}\label{lem:cofibrant_fiber_product}
If $B$ and $C$ are cofibrants, and $A$ is any simplicial sets with maps $B \rightarrow A$, $C \rightarrow A$ then the pullback $B \times_{A} C$ is cofibrant.
\end{lemma}

\begin{proof}
We check it first in the case $A=1$, i.e. for the product $B \times C$. Let $x = (b,c) \in (B \times C)_n$, if $B$ and $C$ are cofibrant one can apply lemma \ref{lem:EZ_cof} and write $b=p^* b'$ and $c=q^* c'$ with $b'$ and $c'$ non-degenerate cells and $p:[n] \twoheadrightarrow [m]$ and $q:[n] \twoheadrightarrow [k]$ are two degeneracies. We claim that $x$ is degenerate if and only if the map $(p,q):[n] \rightarrow [m] \times [k]$ is not monic, which is indeed a decidable condition as $(p,q)$ is a map between finite decidable sets.

Indeed, the pair of map $(p,q)$ corresponding to a degenerate cell $x=r^* x'$ for any non-trivial degeneracy $r:[n] \twoheadrightarrow [n']$, is  $(p'r,q'r)$ where $(p',q')$ are the maps corresponding to $x'$, and this is never monic as it factor into $r$, hence for a degenerate cell the condition above is always satisfied. Conversely, if $(p,q): [n] \rightarrow [m] \times [k]$ is not monic then as it is an increasing map there is some $i$ such that $p(i)=p(i+1)$ and $q(i)=q(i+1)$, hence $(p,q)$ can be factored into the $i$-th degeneracy map:$p=p' d_i$ and $q=q' d_i$ and in this case $x= d_i^* (p'^* b',q'^* c')$ is indeed a degenerate cell.


In the case where $A$ is non-trivial, $B \times_A C$ is a sub-simplicial set of $B \times C$ hence a cell of $B \times_A C$ is degenerate if and only if it is degenerate as a cell of $B \times C$, hence degeneratness in $B \times_A C$ is indeed decidable. 
\end{proof}


\begin{proposition} \label{thm:cof-pbk} If $A,B,C$ are cofibrant simplicial sets, $A \hookrightarrow C$ is a cofibrations and $f:B \rightarrow C$ is any morphism, then the natural projection map $A \times_C B \rightarrow B$ is a cofibration.
\end{proposition}

\begin{proof} As $B$ is cofibrant the proposition just claim that $A \times_C B \rightarrow B$ is a levelwise complemented monomorphisms. A cell $b \in B_n$ is in  $(A \times_C B)_n$ if and only if its image in $C_n$ belong to $A_n$. As $A \rightarrow C$ is a levelwise complemented monomorphism, this is indeed decidable.
\end{proof} 



% \begin{lemma} For $0 \leq k \leq n$, the horn inclusion $\horninc{k}{n} \co \Horn{k}{n} \to \Delt{n}$ is a retract of
% the pushout product
% \[
% \horninc{k}{1} \hattimes i^n \co (\Delt{1} \times \Sphere{n} ) \cup (\braces{k} \times \Delt{n} ) \to \Delt{1} \times \Delt{n} 
% \]
% \end{lemma} 



\begin{proposition} A map is a Kan fibration if and only if it has the right lifting property with respect to the pushout products $i \hattimes \kcyl$.
\end{proposition} 

\begin{proof}The proof of theorem $3.2.3$ in \cite{joyal-tierney:simplicial-homotopy-theory} is completely constructive and sufficient to implies this results.
For more details see also the last claim of corrolary $5.3.2$ in \cite{henry2018wms} (which follows from proposition $5.2.6$ of the same reference). 
\end{proof}

In a general weak model category, one can only show that a trivial fibration between fibrant objects is a weak equivalence. But in simplicial sets one can do a little better, because every cofibrant object has a strong cylinder given by $X \coprod X \hookrightarrow \Delta[1] \times X \rightarrow X$ :

\begin{lemma}\label{lemma:triv_fib_are_we}
A trivial fibrations between cofibrant simplicial sets is a weak equivalence.
In particular, any weak equivalence between cofibrant simplicial set can be factored as a trivial cofibration followed by a trivial fibration.
\end{lemma}

\begin{proof}
Let $p:X \overset{\sim}{\twoheadrightarrow} Y$ a trivial fibration between two cofibrant objects. One show that $p$ is invertible in the homotopy category by constructing first a section $i:Y \rightarrow X$ of $p$ and then a homotopy between $i \circ p$ and the identity of $X$. They are obtained as diagonal filling in the following two squares:

\[
\xymatrix{\emptyset \ar[r] \ar@{^{(}->}[d] & X \ar@{->>}[d]^{\sim} \\ Y \ar@{.>}[ur]^{i} \ar[r] & Y}
\qquad
\xymatrix{X \coprod X \ar[rr]^{(Id, i \circ p)} \ar@{^{(}->}[d] & &  X \ar@{->>}[d]^{\sim} \\ \Delta[1] \times X \ar@{.>}[rru] \ar[r]& X \ar[r]^{p} & Y  }
\]

It follows that if $X \rightarrow Y$ is a weak equivalences between two cofibrant objects then if one factor it as a cofibration followed by a trivial fibration, then the cofibration part is a trivial cofibration.
\end{proof}


\newpage

\section{Dependent products}

The first aim of this section is to show that for every fibration $p \co B \to A$~with $A$ cofibrant, the pushforward functor $\Pi_p \co \catE_{/B} \to \calE_{/A}$ 
preserves fibrations. Our second aim is to build on this result to define sufficient structure to interpret Martin-L\"of's rules for $\Pi$-types. 

\medskip

For our first aim, let $p \co B \to A$ be a fibration with cofibrant codomain and observe that 
$\Pi_p \co \catE_{/B} \to \calE_{/A}$  preserves fibrations if and only if its left adjoint 
\[
p^* \co \catE_{/A} \to \calE_{/B}
\]
preserves trivial cofibrations. Furthermore,
\begin{lemma} \label{thm:missing-1}
\hfill 
\begin{enumerate}[(i)] 
\item $\mathcal{J} \subset \Cof \cap \mathcal{S}$.
\item $\Cof \cap \mathcal{S} \subseteq \TrivCof$.
\end{enumerate}
\end{lemma} 

\begin{lemma} 
\label{thm:missing-2}
For $k \in \{0,1\}$, the pullback of a strong $k$-oriented homotopy equivalence 
with cofibrant codomain along a
fibration is a strong $k$-oriented homotopy equivalence.
\end{lemma}






\begin{theorem} 
\label{thm:restricted-frobenius}
The semi-model structure for Kan complexes on $\SSet$ has the restricted Frobenius condition.
\end{theorem} 

\begin{proof}  Since the semi-model structure in which we 
are working is cofibrantly generated, it is sufficient [TO CHECK] that $p^*$ sends generating trivial cofibrations to trivial cofibrations. So, let $p \co B \to \Delta[n]$ be a fibration, $i \co \Lambda^k[n]
\to \Delta[n]$ be a horn inclusion, and define $ j \defeq p^*(i)$, given by 
the pullback diagram
\[
\xymatrix{
\bullet  \ar[r] \ar[d]_j \drpullback & \Lambda^k[n] \ar[d]^{i} \\
B \ar[r]_-{p} & \Delta[n] }
\]
We need to show that $j$ is a trivial cofibration.  
First, since $i$ is a trivial cofibration, it is in particular
a cofibration and therefore $j$ is again a cofibration by~\cref{thm:cof-pbk}. Secondly, since~$i \in \cal{J}$,
by part~(i) of \cref{thm:missing-1}, it is a cofibration and a strong homotopy equivalence. Since its codomain is cofibrant, $j$ is a strong homotopy equivalence by~\cref{thm:missing-2}.
But now $j$ is both a cofibration and a strong homotopy equivalence
and hence it is a trivial cofibration, as required, by part~(ii) of \cref{thm:missing-2}.
\end{proof} 


We now discuss our second aim, namely showing how we can build on \cref{thm:restricted-frobenius} 
to define sufficient structure to interpret $\Pi$-types. This is not immediate since the result of applying $\Pi_p$ to a 
fibration with cofibrant domain need not have cofibrant domain.
 Suppose that we have fibrations 
$q \co B \to A$ and~$p \co A \to \Gamma$, with
all objects both fibrant and cofibrant. 
We begin by applying 
\[
\Pi_p  \co \SSet_{/A} \to \SSet_{/\Gamma}
\]
to $q \co B \to A$, so as to obtain $\Pi_p(q) \co \Pi_A(B) \to \Gamma$, which is
a fibration by~\cref{thm:restricted-frobenius}. The domain of this map is fibrant but
not necessarily cofibrant, so we consider its cofibrant replacement 
\[
\widetilde{\Pi}_A(B) \defeq \mathbb{L} \big( \Pi_A(B)  \big) \, ,
\]
which comes equipped with a trivial fibration $\varepsilon \co \widetilde{\Pi}_A(B) \to \Pi_A(B)$.
Finally, we define the fibration $\widetilde{\Pi}_p(q) \co \widetilde{\Pi}_A(B) \to \Gamma$ as 
 the composite
 \[
\xymatrix{
\widetilde{\Pi}_A(B) \ar[rr]^{\varepsilon} \ar[dr]_{\widetilde{\Pi}_p(q) } & & \Pi_A(B) \ar[dl]^{\Pi_p(q)}  \\
 & \Gamma &} 
 \]
This will satisfy the $\beta$-rule but not the $\eta$-rule for $\Pi$-types [TO BE ADDED].


\newpage

\section{The universe}

Recall that we work in a constructive set theory with two universes $\mathsf{u}_1$ and $\mathsf{u}_2$
and that we refer to elements of $\mathsf{u}_1$ as small sets. We then define a simplicial
set $X$ to be \emph{small}


\begin{definition} \hfill 
\label{thm:small}
\begin{enumerate}[(i)]
\item We say that a simplicial set $X$ is \emph{small}  if $X_n$ is a small set for every $[n] \in \Delta$. 
\item We say that a map $f \co Y \to X$ in $\SSet$ is \emph{small} if for every $x \co \Delta[n] 
\to X$ the simplicial set~$Y_x$ fitting in the pullback square
\[
\xymatrix{
Y_x \ar[r] \ar[d] \drpullback & Y \ar[d]^{f} \\
\Delta[n] \ar[r]_x & X }
\]
is small.
\end{enumerate}
\end{definition} 

By the results in~\cite{hofmann-streicher-universes} for arbitrary presheaf categories, small maps in
 $\SSet$ admit a weak classifier, \ie a small map $\rho \co \VV \to \V$ such 
that for every small map $f \co Y \to X$ there exists  a pullback diagram of the form
\[
\xymatrix{
Y \ar[r] \ar[d]_f \drpullback  & \VV \ar[d]^\rho \\
X \ar[r] & \V }
\]
Letting $X = \Delta[n]$ in this diagram suggests to define $\V_n$ as the set of all small maps with codomain~$\Delta[n]$. In this way, however, one does not obtain a presheaf since the transition functions
will satisfy the functorial laws only up to isomorphism rather than equality. To remedy this, the $n$-simplices of $\V$ are defined instead to be the functors $F \co (\Delta/[n])^{\op} \to \Set$ such that 
the corresponding map of simplicial sets $ \mathsf{El}(F) \to \Delta[n]$ is small. MORE TO BE ADDED.

\medskip

Following~\cite{cisinski-univalence,voevodsky-simplicial-model}, we consider the pullback 
\[
\xymatrix{
\UU \ar[r] \ar[d]_\pi \drpullback  & \VV \ar[d]^\rho \\
\U \ar[r] & \V }
\]
where $\U \subseteq \V$ is defined by letting 
\[
\U_n = \{ F \in \V_n \ | \ \mathsf{El}(F) \to \Delta[n] \text{ is a small Kan fibration and $\mathsf{El}(F)$ is cofibrant} \}
\]


\begin{proposition} \label{thm:universe-u}  \hfill 
\begin{enumerate}[(i)] 
\item $\pi \co \UU \to \U$ is a small Kan fibration.
\item For any map $X \rightarrow U$ with $X$ cofibrant, the object $Y$ in the pullback:

\[
\xymatrix{
Y \ar[r] \ar[d] \drpullback & \UU \ar[d]^\pi \\
X \ar[r] & \U }
\]

is cofibrant.

\item $\pi \co \UU \to \U$ classifies small Kan fibrations between cofibrant object, \ie 
for every small Kan fibration $f \co Y \to X$ between cofibrant object there exists a pullback diagram of the form
\[
\xymatrix{
Y \ar[r] \ar[d]_f \drpullback & \UU \ar[d]^\pi \\
X \ar[r] & \U }
\]

\end{enumerate}
\end{proposition}

\begin{proof} We prove the three claims separately.
\begin{enumerate}[(i)] 
\item For any map $\Delta[n] \rightarrow U$, if one form the pullbacks:

\[
\xymatrix{
X \ar[r] \ar[d] \drpullback & \UU \ar[d]^\pi \ar[r] & \VV \ar[d]^{\rho} \\
\Delta[n] \ar[r]^{x} & \U \ar[r] & V }
\]


$X \rightarrow \Delta[n]$ is hence the object $ \mathsf{El}(F) \rightarrow \Delta[n]$ for the $F$ corresponding to $\Delta[n] \rightarrow V$, hence by definition of $U$, $X$ is cofibrant and $X \rightarrow \Delta[n]$ is a small Kan fibration. This implies that $\pi:\UU \rightarrow \U$ is small, and that it it has a chosen lift against all the $\Lambda^k[n] \hookrightarrow \Delta[n]$:


\[
\xymatrix{
\Lambda^k[n] \ar[r] \ar[d] & X \drpullback \ar@{->>}[d] \ar[r] & \UU \ar[d]^\pi \\
\Delta[n] \ar[r]^{id} \ar@{.>}[ur]^{\exists} & \Delta[n] \ar[r] & \U  }
\]



\item 

Let $y \in Y_n$, and let $x$ its image in $X$. As $X$ is cofibrant one can write in a unique way $x=s^* x'$ with $s:[n] \twoheadrightarrow [k]$ a degeneracies and $x' \in X_k$ a non-degenerate cell. Let $x': \Delta[k] \rightarrow X$ be the corresponding map.

One form the pullback

\[
\xymatrix{
E \ar[r]^w \ar[d] \drpullback & Y \ar[r] \ar[d]_f \drpullback & \UU \ar[d]^\pi \\
\Delta[k] \ar[r]^x' & X \ar[r] & \U }
\]

By the universal property of the pullback, there is a unique cell $e \in E_n$ such that $w(e)=y$, and the image of $e$ in $\Delta[k]$ is the cell $s:[n] \twoheadrightarrow [k]$, whose image in $X$ are both equal to $x=s^* x'$.

By definition of $U$, $E$ is a cofibrant object, hence it is decidable whether $e$ is degenerate or not. We claim that $y$ is degenerate if and only if $e$ is, which implies that it is decidable whether $y$ is degenerate:

Indeed as $y$ is the image of $e$ then if $e$ is degenerate then $y$ is. Conversely, assume that $y=p^* y_1$ for a non-trivial degeneracy $p$, then $x=p^* x_1$, hence by the uniqueness part of the Eilenberg-Zilber lemma (in $X$) one has that $s=q \circ p$ for some degeneracy $q$, and $x_1 = q^* x'$. One in particular get a unique cell $e_1$ of $E$ whose image in $\Delta[n]$ and $Y$ are respectively $q$ and $y_1$, whose image in $X$ are both equal to $x_1=q^* x'$. Finally, the image of $p^* e_1$ in $\Delta[n]$ and $Y$ are repectively $p^* y_1 =y$ and $q \circ p =s$, hence $p^* e_1 =e$ which proves that $e$ is degenerate as soon as $y$ is.



\item Any map $Y \rightarrow X$ is a pullback of $\rho: \VV \rightarrow \V$. The corresponding map $X \rightarrow \V$ factor in $U \subset V$ if and only if for every $\Delta[n] \rightarrow X$ the pullback of $Y$, $E \rightarrow \Delta[n]$ is a small fibration with $E$ cofibrant. So if $Y$ is cofibrant then $E$ is cofibrant because of \ref{lem:cofibrant_fiber_product} and if $Y \rightarrow X$ is a small fibration then any of its pullback is also a small fibration.

 \qedhere
\end{enumerate}
\end{proof} 



The simplicial set $\U$ and $\UU$ does not appear to be cofibrant themselve. So we need to take a cofibrant replacement $p:\U_c \overset{\sim}{\twoheadrightarrow} \U$ of $\U$ (with $p$ a trivial fibration). One define $\UU_c$ as the pullback: 
\[
\xymatrix{
\UU_c \ar[d]_{\pi_c} \ar[r] \drpullback & \UU \ar[d]^{\pi}  \\
\U_c \ar[r]_p & \U}
\]

$\UU_c$ is cofibrant because of point $(ii)$ of \ref{thm:universe-u}, and  we can now prove that $\pi_c \co \UU_c \to \U_c$ has the desired properties.


\begin{proposition} \label{thm:universe-uc} 
\hfill 
\begin{enumerate}[(i)] 
\item $\pi_c \co \UU_c \to \U_c$ is a small Kan fibration between fibrant objects. 
\item The map $\pi_c \co \UU_c \to \U_c$ classifies small Kan fibrations between cofibrant objects, \ie 
for every small Kan fibration $f \co Y \to X$ with $X$ and $Y$ cofibrant there exists a pullback diagram of the form
\[
\xymatrix{
Y \ar[r] \ar[d]_f & \UU_c \ar[d]^{\pi_c} \\
X \ar[r] & \U_c }
\]

\end{enumerate}
\end{proposition}

\begin{proof} Part~(i) follows from part~(i) and part~(ii) of~\cref{thm:universe-u}. For part~(ii), 
let $f \co Y \to X$ be a small Kan fibration with $X$ cofibrant. Since $f$ is a
small Kan fibration, we know 
from~\cref{thm:universe-u} that there is a pullback diagram of the form 
\[
\xymatrix{
Y \ar[r] \ar[d]_f \drpullback & \UU \ar[d]^{\pi} \\
X \ar[r] & \U }
\]
Since $X$ is cofibrant, we have the lifting diagram
\[
\xymatrix{
0 \ar[r] \ar[d] & \U_c \ar[d]^{p} \\
X \ar[r] \ar@{.>}[ur] & \U }
\]
which shows that the map $X \to \U$ factors via $\U_c$.  We then obtain the diagram
\[
\xymatrix{
Y \ar[r] \ar[d]_f &  \UU_c \ar[r]  \ar[d]^{\pi_c} \drpullback & \UU \ar[d]^{\pi} \\
X \ar[r] & \U_c \ar[r]_p &  \U }
\]
Here, the right-hand side square and the rectangle are pullbacks and therefore the left-hand
side square is also a pullback, as required. Part (iii) follows from the fact that both $\U_c$ and
$\UU$ are cofibrant, the latter being part (iii) of~\cref{thm:universe-u}.
\end{proof} 





Note that we have not shown yet that $\U_c$ fibrant. This will be done in~\cref{sec:fibuu}, as a consequence of the equivalence extension property for fibrations, which we establish in~\cref{sec:equep}.

\newpage


\section{The equivalence extension property}
\label{sec:equep}

\begin{itemize}
\item Here we follow Kapulkin and Lumsdaine.
\end{itemize}


(WORK IN PROGRESS)


\begin{lemma}\label{Lemma:ForTheExtProperty}

\begin{enumerate}

\item For any map $i:A \rightarrow B$ with $A$ cofibrant, the functor

 \[ \Pi_i : \SSet /A \rightarrow \SSet/B  \]

send trivial fibrations to trivial fibrations.

\item If $i$ is a monomorphism then the co-unit of adjunction $i^* \pi_i \rightarrow Id_{\SSet/A}$ is an isomorphism.

\item If $i:A \hookrightarrow B$ is a cofibration, and $X \in \SSet_{/A}$ is cofibrant. Then $\Pi_i X$ is also cofibrant.

\item Trivial fibrations extend along monomorphism with cofibrant domain, i.e. given a trivial fibration $p$ and a monomorphism $i$ as in the solid diagram:

\[
\xymatrix{
Y \ar@{.>}[r] \ar@{->>}[d]^{\sim}_{p} \drpullback  & Y' \ar@{.>>}[d]^{\sim}_{p'} \\
X \ar@{^{(}->}[r]^i &  X' }
\]

with $X$ cofibrant, then there exists a trivial fibration $Y' \rightarrow X'$ which fits in the dotted pullback square above. Moreover if $Y$ is cofibrant and $i$ is a cofibration, then $Y'$ can be taken cofibrant as well.



\end{enumerate}

\end{lemma}

 
NOTE: I remember we proved $(3)$ explicitely as this was something I was worried about. but the following proof is a lot harder than in my memories. Do you have any notes about this claims ? If not just erase this note.


\begin{proof}

\begin{enumerate}

\item $\Pi_i$ is the right adjoint to the pullback functor: $i^*:\SSet/B \rightarrow \SSet/A$, and by lemma \ref{thm:cof-pbk}, $i^*$ preserve cofibration between cofibrant objects. As in simplicial sets trivial fibrations are characterized by the right lifting property along cofibrations between cofibration objects (the generating cofibrations are between cofibrant objects), this shows that $\Pi_i$ preserve trivial fibrations.

\item As $i$ is a monomorphism, the forgetful functor: $\Sigma_i : \SSet/A \rightarrow \SSet/B$ is fully faithful, hence the unit $Id_{\SSet_{/A}} \rightarrow i^* \Sigma_i$ is an isomorphism, and hence by adjunction the counit $Id_{\SSet_{/A}} \rightarrow i^* \Pi_i$ is also an isomorphism.

\item Let $v$ be a $n$-cell in $\Pi_i(X)$.
If the image of $v$ is in $A$ then $v$ is a cell of $X \subset \Pi_i(X)$, in which case it is decidable whether $v$ is degenerate or not.
As $A$ is levelwise complemented in $B$, one can assume that $v$ is not in the image of $A$. In this case it is decidable if the image of $v$ in $B$ is degenerate or not.
Infact, by the Eilenberg-Zilber lemma one can also decide for each given degeneracy if the image of $v$ is degenerate for this precise degeneracy or not. 

Let $\sigma:[n] \twoheadrightarrow [k]$ be any degeneracy, we will show that it is decidable whether $v$ is ``$\sigma$-degenerate, i.e. if $v =\sigma^* v'$ for some $v'$. Note that if $v$ is $\sigma$-degenerate then its image in $B$ is as well. As this is a decidable question, one can freely assume that the image of $v$ in $B$ is $\sigma$-degenerate, i.e. for the form $\sigma^* b$ for some $b \in B$ (and not in $A$).

 One can form the pullback square:


\[
\xymatrix{
V \ar@{^{(}->}[r] \drpullback \ar[d] & \Delta[n] \ar@{->}[d]^{\sigma} \\
V_{\sigma} \ar@{^{(}->}[r] \drpullback \ar[d] & \Delta[k] \ar@{->}[d]^b \\
A \ar@{^{(}->}[r] &  B }
\]

Given its image in $B$, the cell $v: \Delta[n] \rightarrow \Pi_i X$ is uniquely determined by the data of a morphism $\lambda: V\rightarrow X$. The cell $v$ is $\sigma$-degenerate if and only if $\lambda$ factors in $V_{\sigma}$ (such a factorization being unique if it exists). For any $J \subset [n]$, the $J$-face of a cell is said to be $\sigma$-degenerate if and only if it is degenerate for the (potentially trivial) degeneracy: $\sigma_{|J} : J \rightarrow \sigma(J)$. We claim that $\lambda$ factor into $V_{\sigma}$ if and only for all $i:[f] \hookrightarrow [n]$ that belong to $V$ (and $V$ is decidable so there is only a finite cardinal of them), $i^* \lambda$ is $\sigma$-degenerate (which is dediable). Indeed $V$ is the gluing of all the $\sigma \circ i$ for such faces, for each individual face $i$ one has a factorization into its image in $V_{\sigma}$ if and only if $i^* \lambda$ is $\sigma$-degenerate, and as such factorization are unique they patch together on $V_{\sigma}$ is they all exists.

\item One can simply take $p'= \Pi_i p$: it is a trivial fibration by point $(1)$ and the square is a pullback by point $(2)$. The final remark about the cofibrancy of $Y'$ follow from $(3)$.

\end{enumerate}
\end{proof}



\begin{proposition}[Homotopy extention property]

Given the Solid part of the diagram:

\[ 
\xymatrix{
  X_0
  \ar@{.>}[rr]
  \ar[dr]^{\sim}
  \ar@{->>}[dd]
&&
  Y_0
  \ar@{.>}[dr]^{\sim}
  \ar@{.>>}[dd]|{\hole}
&\\&
  X_1
  \ar[rr]
  \ar@{->>}[dl]
&&
  Y_1
  \ar@{->>}[dl]
\\
  A
  \ar@{^{(}->}[rr]^i
&&
  B
&
}
\]

where all the objects are cofibrant, $X_1$ is the pullback $i^* Y_1$, and all the maps drawn as cofibration, fibration and weak equivalences are. Then there is a cofibrant object $Y_0$ which fit into the dotted diagram and such that $X_0$ is the pullback $i^* Y_0$.



\end{proposition}

\begin{proof}
 
One define $Y_0$ as the following pullback:

\[\xymatrix{
Y_0 \ar[d] \ar[r] \drpullback & \Pi_i X_0 \ar[d] \\
Y_1 \ar[r] & \Pi_i X_1
}\]

Where $Y_1 \rightarrow \Pi_i X_1$ is the unit of adjunction between $i^*$ and $\Pi_i$, as $X_1 \simeq i^* Y_1$.

If one applies $i^*$ to this pullback square, one gets a pullback square:


\[\xymatrix{
i^* Y_0 \ar[d] \ar[r] \drpullback & X_0 \ar[d] \\
X_1 \ar[r] & X_1
}\]

as $i^* \Pi_i \simeq Id$ by the second point of lemma \ref{Lemma:ForTheExtProperty}. Hence $X_0$ is indeed the pullback of $Y_0$.


As $X_0$ is cofibrant then $\Pi_i X_0$ is cofibrant by point $(3)$ of lemma \ref{Lemma:ForTheExtProperty}, and hence $Y_0$ as defined above is also cofibrant because of lemma \ref{lem:cofibrant_fiber_product}. This also implies that the maps $X_0 \rightarrow Y_0$ and $X_1 \rightarrow Y_1$ are cofibrations by lemma \ref{thm:cof-pbk}, as they are pullback of $A \hookrightarrow B$.





It remains to prove that $Y_0 \rightarrow Y_1$ is a weak equivalence and that $Y_0 \rightarrow B$ is a fibration. By lemma \ref{lemma:triv_fib_are_we}, one can factor the map $w:X_0 \rightarrow X_1$ into a trivial cofibration followed by a trivial fibration, and by functoriality of our construction it is sufficient to prove these claims when $w$ is a trivial fibration or a trivial cofibration.

If $w:X_0 \rightarrow X_1$ is a trivial fibration, then its image under $\Pi$ is a trivial fibration by the first point of lemma \ref{Lemma:ForTheExtProperty}, and the maps $Y_0 \rightarrow Y_1$ being a pullback of this map is also a trivial fibration. This also implies that $Y_0 \rightarrow Y_1 \rightarrow B$ is a fibration.


We now assume that $j:X_0 \rightarrow X_1$ is a trivial cofibration. Using that the maps from $X_0$ and $X_1$ to $A$ are fibrations, this allows to show that $j$ is a strong deformation retract over $A$, i.e. there is a retraction $r:X_1 \rightarrow X_0$ of $j$ in $\SSet_{/A}$ And a homotopy $H: \Delta[1] \times X_1 \rightarrow X_1$ between $j \circ r$ and $Id_{X_1}$, whose composte with $X_1 \rightarrow A$ is the trivial homotopy.

We want to show that $Y_0 \rightarrow Y_1$ is also a deformation retract by constructing a similar homotopy $H':\Delta[1] \times Y_1 \rightarrow Y_1$. This homotpy will be constructed so that on $\Delta[1] \times X_1$ it is $H$, on $\Delta[0] \times Y_0 $ it is the map $\Delta[1] \times Y_0 \rightarrow \Delta[0] \times Y_0 \simeq Y_0 \rightarrow Y_1$ (and the indeed both agree on $\Delta[1] \times X_0$ and on $\Delta[0] \times Y_1$ it is the identity. This is achieved by taking a diagonal filling in the square:


\[\xymatrix{
\left[ \Delta[1] \times (Y_0 \cup X_1) \right] \cup \left[ \Delta[0] \times Y_1 \right] \ar@{^{(}->}[d]^{\sim} \ar[r] & Y_1 \ar@{->>}[d] \\
\Delta[1] \times Y_1 \ar[r] \ar@{.>}[ur]^{H'} & B
}\]

The right map being a trivial cofibration as the pushout-product of $\delta_0 : \Delta[0] \rightarrow \Delta[1]$ against the map $Y_0 \cup X_1 \rightarrow Y_1$ which is indeed a cofibration.

It remains to see that the map $H_{1}:Y_1 \rightarrow Y_1$ is indeed a projection on $Y_0$ (retraction of $Y_0 \rightarrow Y_1$). We already know that the restriction of $H_{1}$ to $Y_0$ is indeed the inclusion of $Y_0$ in $Y_1$, so it is enough to show that $H_{1}$ has values in $Y_0$. We also know that $H_{1}$ restricted to $X_1$ takes values in $X_0 \subset Y_0$. By definition of $Y_0$, the map $H_1$ factor into $Y_0$ if and only if it takes values in $\Pi_i X_0$ when seen as a map to $\Pi_i X_1$, and by adjunction this is the case if and only if the map corresponding to $H_1$, $X_1=i^* Y_1 \rightarrow X_1$ takes values in $X_0$, but already mentioned above that this was indeed the case.

The fact that $Y_0 \rightarrow Y_1$ is a deformation retract show that it is invertible in the homotopy category, in particular it is indeed a weak equivalence.

The construction above also shows that in this case $Y_0$ is retract of $Y_1$ in $\SSet_{/B}$ hence $Y_0 \rightarrow B$ is a fibration because $Y_1 \rightarrow B$ is.

\end{proof}

\newpage

\section{Fibrancy and univalence of the universe}
\label{sec:fibuu}

\begin{itemize}
\item Fibrancy should follow directly from equivalence extension property, without using `composition vs filling' but rather retract property for horns (see notes).
\item Once we have established fibrancy of $U_c$, then one can prove univalence by showing that 
$t \co \mathsf{Weq}(U_c) \to U_c$ is a trivial fibration. 
\item Question: do we need to know that $\mathsf{Weq}(U_c)$ is a cofibrant object to get univalence? 
\end{itemize}


\newpage

\section{Semantics}


\begin{itemize}
\item This should be essentially straightforward, following Kapulkin and Lumsdaine, but we may need to modify the notion of a $\Pi$-structure to accommodate the cofibrant replacements that we take for $\Pi$.
\end{itemize}

\nocite{*}


\bibliographystyle{plain}
\bibliography{../Auxiliary/bibliography}

\end{document}

